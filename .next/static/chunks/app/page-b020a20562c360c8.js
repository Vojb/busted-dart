(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{162:(e,s,t)=>{Promise.resolve().then(t.bind(t,5698))},5698:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eF});var a=t(5155),r=t(2115),l=t(2442),i=t(8460),n=t(9722),o=t(622);function c(...e){return(0,o.QP)((0,n.$)(e))}let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function m({className:e,variant:s,size:t,asChild:r=!1,...i}){let n=r?l.DX:"button";return(0,a.jsx)(n,{"data-slot":"button",className:c(d({variant:s,size:t,className:e})),...i})}function x({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card",className:c("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function u({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-header",className:c("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function h({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-title",className:c("leading-none font-semibold",e),...s})}function f({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-description",className:c("text-muted-foreground text-sm",e),...s})}function g({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-content",className:c("px-6",e),...s})}let p=[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5];function j(e){let s=p.indexOf(e);if(-1===s)return[];let t=(s-1+p.length)%p.length,a=(s+1)%p.length;return[p[t],p[a]]}function v(){let e=[];for(let t=2;t<=170;t++){var s;(s=t)<=0||s>170||1===s||!(s<=170)||1===t||e.push(t)}return e[Math.floor(Math.random()*e.length)]}function b({onSelectTarget:e,disabled:s,size:t=100}){let[l,i]=(0,r.useState)(null),n=(t,a)=>{if(s)return;let r="T"===t?3*a:"D"===t?2*a:a;e({zone:t,number:a,label:`${t}${a}`,value:r})},o=t=>{s||(t?e({zone:"BULL",number:50,label:"Bull",value:50}):e({zone:"OUTER_BULL",number:25,label:"25",value:25}))},c=p.map((e,s)=>{let t=s%2==0;return{number:e,angle:18*s-9,segmentAngle:18,singleColor:t?"#1a1a1a":"#f5f5dc",doubleTripleColor:t?"#dc2626":"#16a34a"}}),d=(e,s,t,a)=>{let r=m(170,170,s,a),l=m(170,170,s,t),i=m(170,170,e,a),n=m(170,170,e,t),o=a-t<=180?"0":"1";return`M ${r.x} ${r.y} A ${s} ${s} 0 ${o} 0 ${l.x} ${l.y} L ${n.x} ${n.y} A ${e} ${e} 0 ${o} 1 ${i.x} ${i.y} Z`},m=(e,s,t,a)=>{let r=(a-90)*Math.PI/180;return{x:e+t*Math.cos(r),y:s+t*Math.sin(r)}};return(0,a.jsxs)(x,{className:"p-2 sm:p-3 flex items-center justify-center",children:[(0,a.jsxs)("svg",{viewBox:"0 0 340 340",className:"w-full max-w-[400px] touch-none select-none",style:{filter:s?"opacity(0.5)":"none",width:`${t}%`,maxWidth:`${400*t/100}px`},children:[(0,a.jsx)("circle",{cx:"170",cy:"170",r:"148",fill:"none",stroke:"#888",strokeWidth:"2"}),c.map(({number:e,angle:s,segmentAngle:t,singleColor:r,doubleTripleColor:o})=>{let c=s+t,x=s+t/2;return(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:d(130,145,s,c),fill:l===`D${e}`?"#fbbf24":o,stroke:"#000",strokeWidth:"0.5",className:"cursor-pointer transition-all",onClick:()=>n("D",e),onMouseEnter:()=>i(`D${e}`),onMouseLeave:()=>i(null),style:{opacity:l===`D${e}`?1:.9}}),(0,a.jsx)("path",{d:d(95,130,s,c),fill:l===`S${e}`?"#fbbf24":r,stroke:"#000",strokeWidth:"0.5",className:"cursor-pointer transition-all",onClick:()=>n("S",e),onMouseEnter:()=>i(`S${e}`),onMouseLeave:()=>i(null),style:{opacity:l===`S${e}`?1:.9}}),(0,a.jsx)("path",{d:d(75,95,s,c),fill:l===`T${e}`?"#fbbf24":o,stroke:"#000",strokeWidth:"0.5",className:"cursor-pointer transition-all",onClick:()=>n("T",e),onMouseEnter:()=>i(`T${e}`),onMouseLeave:()=>i(null),style:{opacity:l===`T${e}`?1:.9}}),(0,a.jsx)("path",{d:d(20,75,s,c),fill:l===`S${e}`?"#fbbf24":r,stroke:"#000",strokeWidth:"0.5",className:"cursor-pointer transition-all",onClick:()=>n("S",e),onMouseEnter:()=>i(`S${e}`),onMouseLeave:()=>i(null),style:{opacity:l===`S${e}`?1:.9}}),(0,a.jsx)("text",{...m(170,170,160,x),textAnchor:"middle",dominantBaseline:"middle",className:"text-xs sm:text-sm font-bold fill-foreground pointer-events-none",children:e})]},e)}),(0,a.jsx)("circle",{cx:"170",cy:"170",r:"20",fill:"25"===l?"#fbbf24":"#16a34a",stroke:"#000",strokeWidth:"0.5",className:"cursor-pointer transition-all",onClick:()=>o(!1),onMouseEnter:()=>i("25"),onMouseLeave:()=>i(null)}),(0,a.jsx)("circle",{cx:"170",cy:"170",r:"10",fill:"BULL"===l?"#fbbf24":"#dc2626",stroke:"#000",strokeWidth:"0.5",className:"cursor-pointer transition-all",onClick:()=>o(!0),onMouseEnter:()=>i("BULL"),onMouseLeave:()=>i(null)})]}),(0,a.jsx)("div",{className:"text-xs sm:text-sm text-muted-foreground text-center mt-2",children:l&&(0,a.jsx)("span",{className:"font-medium",children:"BULL"===l?"Bull (50)":"25"===l?"Outer Bull (25)":l})})]})}var N=t(2508);function y({currentScore:e,startingScore:s,dartsThrown:t}){return(0,a.jsx)(x,{className:"p-3 sm:p-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)("div",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Remaining"}),(0,a.jsx)("div",{className:"text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight",children:e}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-xs sm:text-sm text-muted-foreground",children:[(0,a.jsx)(N.A,{className:"size-3 sm:size-4"}),(0,a.jsxs)("span",{children:["Started ",s]})]})]})})}let D=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function w({className:e,variant:s,asChild:t=!1,...r}){let i=t?l.DX:"span";return(0,a.jsx)(i,{"data-slot":"badge",className:c(D({variant:s}),e),...r})}function T({darts:e,dartsThrown:s}){let t=3*Math.floor((s-1)/3),r=e.slice(t,t+3),l=s%3||3;return(0,a.jsx)(x,{className:"p-2 sm:p-3",children:(0,a.jsx)("div",{className:"grid grid-cols-3 gap-1.5 sm:gap-2",children:[0,1,2].map(e=>{let s=r[e],t=e>=l;return(0,a.jsxs)("div",{className:`flex flex-col items-center gap-1 p-2 sm:p-3 rounded-md border-2 transition-colors ${t?"border-dashed border-muted bg-muted/20":s?.wasAccurate?"border-primary bg-primary/5":"border-secondary bg-secondary/5"}`,children:[(0,a.jsxs)("div",{className:"text-[10px] sm:text-xs font-medium text-muted-foreground",children:["Dart ",e+1]}),s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:s.score}),(0,a.jsx)(w,{variant:s.wasAccurate?"default":"secondary",className:"text-[10px] sm:text-xs",children:s.hit.label})]}):(0,a.jsx)("div",{className:"text-2xl sm:text-3xl font-bold text-muted-foreground/30",children:"-"})]},e)})})})}var z=t(538);function S({dartHistory:e}){return 0===e.length?null:(0,a.jsxs)(x,{className:"p-2 sm:p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 mb-2",children:[(0,a.jsx)(z.A,{className:"size-3 sm:size-4 text-muted-foreground"}),(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-semibold",children:"Throw History"})]}),(0,a.jsx)("div",{className:"flex flex-col gap-1",children:e.slice().reverse().map((s,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-1.5 sm:p-2 rounded-md bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 flex-wrap",children:[(0,a.jsx)(w,{variant:s.wasAccurate?"default":"secondary",className:"text-[10px] sm:text-xs",children:s.aimed}),(0,a.jsx)("span",{className:"text-muted-foreground text-xs",children:"→"}),(0,a.jsx)(w,{variant:"outline",className:"text-[10px] sm:text-xs",children:s.hit})]}),(0,a.jsx)("div",{className:"text-sm sm:text-base font-semibold",children:s.score})]},e.length-t))})]})}let A=(0,i.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function k({className:e,variant:s,...t}){return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:c(A({variant:s}),e),...t})}function $({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"alert-title",className:c("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...s})}function L({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"alert-description",className:c("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...s})}var M=t(4071),B=t(1885),C=t(1585);function F(e){let s={170:[["T20","T20","D25"]],167:[["T20","T19","D25"]],164:[["T20","T18","D25"]],161:[["T20","T17","D25"]],160:[["T20","T20","D20"]],157:[["T20","T19","D20"]],154:[["T20","T18","D20"]],151:[["T20","T17","D20"]],150:[["T20","T18","D18"]],147:[["T20","T17","D18"]],144:[["T20","T20","D12"]],141:[["T20","T19","D12"]],138:[["T20","T18","D12"]],135:[["T20","T15","D15"]],132:[["T20","T16","D12"]],131:[["T20","T13","D16"]],130:[["T20","T18","D8"]],129:[["T19","T16","D12"]],128:[["T18","T14","D16"]],127:[["T20","T17","D8"]],126:[["T19","T19","D6"]],125:[["T18","T13","D16"]],124:[["T20","T14","D11"]],123:[["T19","T16","D9"]],122:[["T18","T18","D7"]],121:[["T20","T11","D14"]],120:[["T20","S20","D20"]],110:[["T20","D25"]],107:[["T19","D25"]],104:[["T18","D25"]],101:[["T17","D25"]],100:[["T20","D20"]],97:[["T19","D20"]],94:[["T18","D20"]],91:[["T17","D20"]],90:[["T18","D18"]],87:[["T17","D18"]],84:[["T20","D12"]],81:[["T19","D12"]],78:[["T18","D12"]],75:[["T15","D15"]],72:[["T16","D12"]],71:[["T13","D16"]],70:[["T18","D8"]],69:[["T19","D6"]],68:[["T20","D4"]],67:[["T17","D8"]],66:[["T10","D18"]],65:[["T11","D16"]],64:[["T16","D8"]],63:[["T13","D12"]],62:[["T10","D16"]],61:[["T15","D8"]],60:[["S20","D20"]],57:[["S17","D20"]],56:[["T16","D4"]],55:[["S15","D20"]],54:[["S14","D20"]],53:[["S13","D20"]],52:[["S12","D20"]],51:[["S11","D20"]],50:[["D25"]],48:[["S16","D16"]],46:[["S6","D20"]],44:[["S12","D16"]],42:[["S10","D16"]],40:[["D20"]],38:[["D19"]],36:[["D18"]],34:[["D17"]],32:[["D16"]],30:[["D15"]],28:[["D14"]],26:[["D13"]],24:[["D12"]],22:[["D11"]],20:[["D10"]],18:[["D9"]],16:[["D8"]],14:[["D7"]],12:[["D6"]],10:[["D5"]],8:[["D4"]],6:[["D3"]],4:[["D2"]],2:[["D1"]]}[e];return s?s.map(e=>e.map(e=>{let s=e.charAt(0),t=e.slice(1);if("D25"===e)return{zone:"BULL",number:50,label:"Bull",value:50};let a=Number.parseInt(t);return{zone:s,number:a,label:e,value:"T"===s?3*a:"D"===s?2*a:a}})):[]}function O({currentScore:e,dartsRemaining:s,lastThrow:t,userRoute:r}){let l=F(e),i=l.length>0,n=(()=>{if(!t||0===r.length)return null;let e=t.aimed;return{wasOptimal:l.some(s=>s.some(s=>s.label===e.label)),wasAccurate:t.wasAccurate}})();return(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:gap-3",children:[n&&(0,a.jsxs)(k,{variant:n.wasAccurate?"default":"destructive",className:"py-2 sm:py-3",children:[(0,a.jsx)(M.A,{className:"size-3.5 sm:size-4"}),(0,a.jsx)($,{className:"text-xs sm:text-sm",children:n.wasAccurate?"Good Shot!":"Missed"}),(0,a.jsxs)(L,{className:"text-xs sm:text-sm",children:[n.wasAccurate&&n.wasOptimal&&"You hit an optimal target. Keep it up!",n.wasAccurate&&!n.wasOptimal&&"Hit, but check suggestions for better routes.",!n.wasAccurate&&"Missed target. Adjust your strategy based on where you landed."]})]}),i&&e>0&&(0,a.jsxs)(x,{className:"p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 mb-2 sm:mb-3",children:[(0,a.jsx)(B.A,{className:"size-3.5 sm:size-4 text-accent"}),(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-semibold",children:"Optimal Routes"})]}),(0,a.jsx)("div",{className:"flex flex-col gap-1.5 sm:gap-2",children:l.slice(0,3).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-1.5 p-2 rounded-lg bg-muted/50",children:[(0,a.jsx)(w,{variant:"outline",className:"shrink-0 text-xs",children:s+1}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 flex-wrap",children:[e.map((s,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(w,{variant:"D"===s.zone?"default":"secondary",className:"font-mono text-xs",children:s.label}),t<e.length-1&&(0,a.jsx)("span",{className:"text-muted-foreground text-xs",children:"→"})]},t)),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground ml-1",children:["= ",e.reduce((e,s)=>e+s.value,0)]})]})]},s))}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2 sm:mt-3",children:"Pro routes. Must finish on double!"})]}),e>0&&e<=170&&(0,a.jsx)(x,{className:"p-2.5 sm:p-3 bg-primary/5",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(C.A,{className:"size-3.5 sm:size-4 text-primary shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h4",{className:"font-semibold text-xs sm:text-sm",children:"Tips"}),(0,a.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-0.5",children:[e>100&&(0,a.jsx)("li",{children:"• Focus on T20s to bring score down"}),e<=40&&e>1&&e%2==0&&(0,a.jsx)("li",{children:"• Finishable with a double!"}),1===e&&(0,a.jsx)("li",{children:"• Score of 1 is bust!"}),1===s&&e>50&&(0,a.jsx)("li",{children:"• Not finishable with one dart. Set up next round."}),e%2==1&&e>50&&(0,a.jsx)("li",{children:"• Odd score - hit single to make even"})]})]})]})})]})}var _=t(9885);function R({className:e,value:s,...t}){return(0,a.jsx)(_.bL,{"data-slot":"progress",className:c("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...t,children:(0,a.jsx)(_.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}var U=t(718);function H({accuracy:e,optimalDecisions:s,totalDecisions:t,averageDartsToFinish:r}){let l=t>0?s/t*100:0,i=l>=80?{label:"Excellent",color:"text-accent"}:l>=60?{label:"Good",color:"text-primary"}:l>=40?{label:"Fair",color:"text-yellow-600"}:{label:"Needs Work",color:"text-destructive"};return(0,a.jsxs)(x,{className:"p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 mb-3 sm:mb-4",children:[(0,a.jsx)(U.A,{className:"size-3.5 sm:size-4 text-muted-foreground"}),(0,a.jsx)("h3",{className:"text-xs sm:text-sm font-semibold",children:"Session Performance"})]}),(0,a.jsxs)("div",{className:"grid gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(N.A,{className:"size-3 sm:size-3.5 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:"Hit Accuracy"})]}),(0,a.jsxs)("span",{className:"text-xs sm:text-sm font-bold",children:[e.toFixed(1),"%"]})]}),(0,a.jsx)(R,{value:e,className:"h-1.5 sm:h-2"})]}),t>0&&(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(M.A,{className:"size-3 sm:size-3.5 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:"Decision Quality"})]}),(0,a.jsx)(w,{variant:"outline",className:`${i.color} text-xs`,children:i.label})]}),(0,a.jsx)(R,{value:l,className:"h-1.5 sm:h-2"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s," of ",t," throws matched optimal routes"]})]}),null!==r&&(0,a.jsxs)("div",{className:"pt-2 sm:pt-3 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:"Avg. Darts to Finish"}),(0,a.jsx)("span",{className:"text-xl sm:text-2xl font-bold",children:r.toFixed(1)})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Lower is better - pros average 3-6 darts"})]})]})]})}var E=t(9123),G=t(1951),W=t(4928),V=t(7514),I=t(7420);let Y="darts_training_progress",P="darts_training_settings";function J(){try{let e=localStorage.getItem(Y);if(!e)return Z();let s=JSON.parse(e);return{...Z(),...s}}catch{return Z()}}function Q(){try{let e=localStorage.getItem(P);if(!e)return K();return JSON.parse(e)}catch{return K()}}function X(e){try{localStorage.setItem(P,JSON.stringify(e))}catch(e){console.error("Failed to save settings:",e)}}function Z(){return{totalGames:0,totalWins:0,totalDarts:0,totalAccurateHits:0,totalOptimalDecisions:0,totalDecisions:0,sessions:[],personalBests:{fewestDarts:null,bestAccuracy:null,bestDecisionRate:null}}}function K(){return{triple:65,double:65,single:85,dartboardSize:100}}function q({progress:e}){let s=function(){let e=J().sessions.slice(-20);if(0===e.length)return{accuracyTrend:0,decisionTrend:0,isImproving:!1};let s=Math.floor(e.length/2),t=e.slice(0,s),a=e.slice(s),r=t.reduce((e,s)=>e+s.accuracy,0)/t.length,l=a.reduce((e,s)=>e+s.accuracy,0)/a.length,i=t.reduce((e,s)=>e+s.optimalDecisionRate,0)/t.length,n=a.reduce((e,s)=>e+s.optimalDecisionRate,0)/a.length;return{accuracyTrend:l-r,decisionTrend:n-i,isImproving:l>r||n>i}}(),t=e.totalGames>0?e.totalWins/e.totalGames*100:0,r=e.totalDarts>0?e.totalAccurateHits/e.totalDarts*100:0,l=e.totalDecisions>0?e.totalOptimalDecisions/e.totalDecisions*100:0,i=e.sessions.slice(-5).reverse();return(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(E.A,{className:"size-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold",children:"Your Progress"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Track your improvement over time"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsx)(x,{className:"p-6 bg-accent/10",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(G.A,{className:"size-8 text-accent"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Fewest Darts"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:e.personalBests.fewestDarts??"-"})]})]})}),(0,a.jsx)(x,{className:"p-6 bg-primary/10",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(N.A,{className:"size-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Best Accuracy"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:null!==e.personalBests.bestAccuracy?`${e.personalBests.bestAccuracy.toFixed(1)}%`:"-"})]})]})}),(0,a.jsx)(x,{className:"p-6 bg-chart-2/10",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(U.A,{className:"size-8 text-chart-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground",children:"Best Decisions"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:null!==e.personalBests.bestDecisionRate?`${e.personalBests.bestDecisionRate.toFixed(1)}%`:"-"})]})]})})]}),(0,a.jsxs)(x,{className:"p-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Overall Statistics"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Win Rate"}),(0,a.jsxs)("span",{className:"text-sm font-bold",children:[t.toFixed(1),"%"]})]}),(0,a.jsx)(R,{value:t,className:"h-2"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[e.totalWins," "," wins out of "," ",e.totalGames," "," games"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Overall Accuracy"}),(0,a.jsxs)("span",{className:"text-sm font-bold",children:[r.toFixed(1),"%"]})]}),(0,a.jsx)(R,{value:r,className:"h-2"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[e.totalAccurateHits," "," hits out of "," ",e.totalDarts," "," darts"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Decision Quality"}),(0,a.jsxs)("span",{className:"text-sm font-bold",children:[l.toFixed(1),"%"]})]}),(0,a.jsx)(R,{value:l,className:"h-2"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[e.totalOptimalDecisions," "," optimal out of "," ",e.totalDecisions]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[(0,a.jsx)(W.A,{className:"size-5 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Total Games Played"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.totalGames})]})]})]})]})]}),e.sessions.length>=10&&(0,a.jsxs)(x,{className:"p-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Recent Trends (Last 20 Games)"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-muted/50",children:[s.accuracyTrend>=0?(0,a.jsx)(M.A,{className:"size-6 text-accent"}):(0,a.jsx)(V.A,{className:"size-6 text-destructive"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Accuracy Trend"}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:[s.accuracyTrend>=0?"+":"",s.accuracyTrend.toFixed(1),"%"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-muted/50",children:[s.decisionTrend>=0?(0,a.jsx)(M.A,{className:"size-6 text-accent"}):(0,a.jsx)(V.A,{className:"size-6 text-destructive"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Decision Trend"}),(0,a.jsxs)("div",{className:"text-xl font-bold",children:[s.decisionTrend>=0?"+":"",s.decisionTrend.toFixed(1),"%"]})]})]})]}),s.isImproving&&(0,a.jsxs)("p",{className:"text-sm text-accent mt-4 flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"size-4"}),"You're improving! Keep practicing to maintain this trend."]})]}),i.length>0&&(0,a.jsxs)(x,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(I.A,{className:"size-5 text-muted-foreground"}),(0,a.jsx)("h3",{className:"font-semibold",children:"Recent Sessions"})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:i.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(w,{variant:e.completed?"default":"secondary",children:e.completed?"Won":"Bust"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-medium",children:["Score:"," ",e.startingScore]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleDateString()})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold",children:[e.dartsThrown," "," darts"]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.accuracy.toFixed(0),"% ","acc"]})]})]},e.id))})]}),0===e.totalGames&&(0,a.jsxs)(x,{className:"p-8 text-center",children:[(0,a.jsx)(W.A,{className:"size-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No Games Yet"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Start playing to track your progress and improvement over time!"})]})]})}var ee=t(9486);function es({className:e,...s}){return(0,a.jsx)(ee.b,{"data-slot":"label",className:c("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}var et=t(8801);function ea({className:e,defaultValue:s,value:t,min:l=0,max:i=100,...n}){let o=r.useMemo(()=>Array.isArray(t)?t:Array.isArray(s)?s:[l,i],[t,s,l,i]);return(0,a.jsxs)(et.bL,{"data-slot":"slider",defaultValue:s,value:t,min:l,max:i,className:c("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...n,children:[(0,a.jsx)(et.CC,{"data-slot":"slider-track",className:"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5",children:(0,a.jsx)(et.Q6,{"data-slot":"slider-range",className:"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full"})}),Array.from({length:o.length},(e,s)=>(0,a.jsx)(et.zi,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},s))]})}function er({onSettingsChange:e}){let[s,t]=(0,r.useState)({triple:65,double:65,single:85,dartboardSize:120});(0,r.useEffect)(()=>{t(Q())},[]);let l=(a,r)=>{let l={...s,[a]:r};t(l),X(l),e?.(l)};return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[(0,a.jsx)(N.A,{className:"size-3.5"}),"Hit Ratio Settings"]}),(0,a.jsx)(m,{onClick:()=>{let s={triple:65,double:65,single:85,dartboardSize:120};t(s),X(s),e?.(s)},variant:"ghost",size:"sm",className:"text-xs h-7",children:"Reset"})]}),(0,a.jsxs)(x,{className:"p-3 space-y-4 bg-card/50",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(es,{htmlFor:"size-slider",className:"text-xs font-medium",children:"Dartboard Size"}),(0,a.jsxs)("span",{className:"text-xs font-semibold text-muted-foreground",children:[s.dartboardSize,"%"]})]}),(0,a.jsx)(ea,{id:"size-slider",min:60,max:150,step:10,value:[s.dartboardSize],onValueChange:e=>l("dartboardSize",e[0]),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(es,{htmlFor:"triple-slider",className:"text-xs font-medium",children:"Triple"}),(0,a.jsxs)("span",{className:"text-xs font-semibold text-muted-foreground",children:[s.triple,"%"]})]}),(0,a.jsx)(ea,{id:"triple-slider",min:10,max:100,step:5,value:[s.triple],onValueChange:e=>l("triple",e[0]),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(es,{htmlFor:"double-slider",className:"text-xs font-medium",children:"Double"}),(0,a.jsxs)("span",{className:"text-xs font-semibold text-muted-foreground",children:[s.double,"%"]})]}),(0,a.jsx)(ea,{id:"double-slider",min:10,max:100,step:5,value:[s.double],onValueChange:e=>l("double",e[0]),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(es,{htmlFor:"single-slider",className:"text-xs font-medium",children:"Single"}),(0,a.jsxs)("span",{className:"text-xs font-semibold text-muted-foreground",children:[s.single,"%"]})]}),(0,a.jsx)(ea,{id:"single-slider",min:10,max:100,step:5,value:[s.single],onValueChange:e=>l("single",e[0]),className:"w-full"})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Adjust dartboard size and hit ratios to match your skill level or practice at different difficulties."})]})}var el=t(2651),ei=t(2791);function en({sessions:e}){return 0===e.length?(0,a.jsx)(x,{className:"bg-card/50",children:(0,a.jsxs)(u,{className:"p-3 pb-2",children:[(0,a.jsx)(h,{className:"text-sm",children:"Game History"}),(0,a.jsx)(f,{className:"text-xs",children:"No games played yet"})]})}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium",children:"Game History"}),(0,a.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:e.map(e=>{let s,t,r;return(0,a.jsx)(x,{className:"bg-card/50",children:(0,a.jsx)(g,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[e.completed?(0,a.jsx)(el.A,{className:"size-3.5 text-green-500 shrink-0"}):(0,a.jsx)(ei.A,{className:"size-3.5 text-red-500 shrink-0"}),(0,a.jsxs)("span",{className:"text-xs font-medium",children:[e.completed?"Finished":"Bust"," ",e.startingScore]})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground space-y-0.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(N.A,{className:"size-3 shrink-0"}),(0,a.jsxs)("span",{children:[e.dartsThrown," darts"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(M.A,{className:"size-3 shrink-0"}),(0,a.jsxs)("span",{children:[e.accuracy.toFixed(1),"% accuracy"]})]})]})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground text-right shrink-0",children:(s=new Date(e.timestamp),((r=new Date(t=new Date)).setDate(r.getDate()-1),s.toDateString()===t.toDateString())?`Today ${s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:s.toDateString()===r.toDateString()?`Yesterday ${s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:s.toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]})})},e.id)})})]})}var eo=t(9199),ec=t(9857),ed=t(9363),em=t(7468),ex=t(3210);function eu({...e}){return(0,a.jsx)(em.bL,{"data-slot":"sheet",...e})}function eh({...e}){return(0,a.jsx)(em.l9,{"data-slot":"sheet-trigger",...e})}function ef({...e}){return(0,a.jsx)(em.ZL,{"data-slot":"sheet-portal",...e})}function eg({className:e,...s}){return(0,a.jsx)(em.hJ,{"data-slot":"sheet-overlay",className:c("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function ep({className:e,children:s,side:t="right",...r}){return(0,a.jsxs)(ef,{children:[(0,a.jsx)(eg,{}),(0,a.jsxs)(em.UC,{"data-slot":"sheet-content",className:c("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===t&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-0 h-full w-full","left"===t&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-0 h-full w-full","top"===t&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-0 h-full w-full","bottom"===t&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-0 h-full w-full",e),...r,children:[s,(0,a.jsxs)(em.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,a.jsx)(ex.A,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ej({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"sheet-header",className:c("flex flex-col gap-1.5 p-4",e),...s})}function ev({className:e,...s}){return(0,a.jsx)(em.hE,{"data-slot":"sheet-title",className:c("text-foreground font-semibold",e),...s})}function eb({className:e,...s}){return(0,a.jsx)(em.VY,{"data-slot":"sheet-description",className:c("text-muted-foreground text-sm",e),...s})}function eN({...e}){return(0,a.jsx)(em.bL,{"data-slot":"dialog",...e})}function ey({...e}){return(0,a.jsx)(em.ZL,{"data-slot":"dialog-portal",...e})}function eD({className:e,...s}){return(0,a.jsx)(em.hJ,{"data-slot":"dialog-overlay",className:c("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function ew({className:e,children:s,showCloseButton:t=!0,...r}){return(0,a.jsxs)(ey,{"data-slot":"dialog-portal",children:[(0,a.jsx)(eD,{}),(0,a.jsxs)(em.UC,{"data-slot":"dialog-content",className:c("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[s,t&&(0,a.jsxs)(em.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(ex.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function eT({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"dialog-header",className:c("flex flex-col gap-2 text-center sm:text-left",e),...s})}function ez({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:c("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function eS({className:e,...s}){return(0,a.jsx)(em.hE,{"data-slot":"dialog-title",className:c("text-lg leading-none font-semibold",e),...s})}function eA({className:e,...s}){return(0,a.jsx)(em.VY,{"data-slot":"dialog-description",className:c("text-muted-foreground text-sm",e),...s})}var ek=t(9372),e$=t(6088);function eL({...e}){return(0,a.jsx)(ek.bL,{"data-slot":"accordion",...e})}function eM({className:e,...s}){return(0,a.jsx)(ek.q7,{"data-slot":"accordion-item",className:c("border-b last:border-b-0",e),...s})}function eB({className:e,children:s,...t}){return(0,a.jsx)(ek.Y9,{className:"flex",children:(0,a.jsxs)(ek.l9,{"data-slot":"accordion-trigger",className:c("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",e),...t,children:[s,(0,a.jsx)(e$.A,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function eC({className:e,children:s,...t}){return(0,a.jsx)(ek.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...t,children:(0,a.jsx)("div",{className:c("pt-0 pb-4",e),children:s})})}function eF(){let[e,s]=(0,r.useState)(170),[t,l]=(0,r.useState)(170),[i,n]=(0,r.useState)(170),[o,c]=(0,r.useState)(0),[d,x]=(0,r.useState)([]),[u,h]=(0,r.useState)("playing"),[f,g]=(0,r.useState)([]),[p,N]=(0,r.useState)(null),[D,w]=(0,r.useState)(!1),[A,k]=(0,r.useState)(!1),[$,L]=(0,r.useState)(Q()),[M,B]=(0,r.useState)("menu"),[C,_]=(0,r.useState)({accurateHits:0,totalDarts:0,optimalDecisions:0,totalDecisions:0});(0,r.useEffect)(()=>{N(J()),L(Q());let e=v();s(e),l(e),n(e)},[]);let R=(s,t)=>{let a=C.totalDarts>0?C.accurateHits/C.totalDarts*100:0,r=C.totalDecisions>0?C.optimalDecisions/C.totalDecisions*100:0;var l={id:Date.now().toString(),timestamp:Date.now(),startingScore:e,dartsThrown:s,completed:t,accuracy:a,optimalDecisionRate:r};let i=J();i.sessions.push(l),i.totalGames+=1,l.completed&&(i.totalWins+=1,(null===i.personalBests.fewestDarts||l.dartsThrown<i.personalBests.fewestDarts)&&(i.personalBests.fewestDarts=l.dartsThrown)),(null===i.personalBests.bestAccuracy||l.accuracy>i.personalBests.bestAccuracy)&&(i.personalBests.bestAccuracy=l.accuracy),(null===i.personalBests.bestDecisionRate||l.optimalDecisionRate>i.personalBests.bestDecisionRate)&&(i.personalBests.bestDecisionRate=l.optimalDecisionRate);try{localStorage.setItem(Y,JSON.stringify(i))}catch(e){console.error("Failed to save progress:",e)}N(J())},U=()=>{w(!1),k(!1);let e=v();s(e),l(e),n(e),c(0),x([]),h("playing"),g([]),_({accurateHits:0,totalDarts:0,optimalDecisions:0,totalDecisions:0})},G=3-o%3,V=C.totalDarts>0?C.accurateHits/C.totalDarts*100:0,I=p&&p.totalWins>0?p.totalDarts/p.totalWins:null;return(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsxs)("div",{className:"container mx-auto p-2 sm:p-3 max-w-7xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)(m,{onClick:U,variant:"outline",size:"sm",className:"text-xs sm:text-sm bg-transparent",children:[(0,a.jsx)(eo.A,{className:"size-3 sm:size-4 mr-1 sm:mr-2"}),"New Game"]}),(0,a.jsxs)(eu,{open:D,onOpenChange:w,children:[(0,a.jsx)(eh,{asChild:!0,children:(0,a.jsxs)(m,{variant:"outline",size:"sm",className:"text-xs sm:text-sm bg-transparent",children:[(0,a.jsx)(ec.A,{className:"size-3 sm:size-4 mr-1 sm:mr-2"}),"Menu"]})}),(0,a.jsxs)(ep,{className:"p-3",children:[(0,a.jsxs)(ej,{children:[(0,a.jsx)(ev,{className:"text-base",children:"Menu"}),(0,a.jsx)(eb,{className:"text-xs",children:"Game controls and options"})]}),(0,a.jsxs)("div",{className:"flex gap-1 mt-4 border-b",children:[(0,a.jsxs)(m,{variant:"settings"===M?"default":"ghost",size:"sm",onClick:()=>B("settings"),className:"flex-1 text-xs h-8 rounded-b-none",children:[(0,a.jsx)(ed.A,{className:"size-3 mr-1"}),"Settings"]}),(0,a.jsxs)(m,{variant:"progress"===M?"default":"ghost",size:"sm",onClick:()=>B("progress"),className:"flex-1 text-xs h-8 rounded-b-none",children:[(0,a.jsx)(E.A,{className:"size-3 mr-1"}),"Progress"]}),(0,a.jsxs)(m,{variant:"history"===M?"default":"ghost",size:"sm",onClick:()=>B("history"),className:"flex-1 text-xs h-8 rounded-b-none",children:[(0,a.jsx)(z.A,{className:"size-3 mr-1"}),"History"]})]}),(0,a.jsxs)("div",{className:"mt-4",children:["settings"===M&&(0,a.jsx)(er,{onSettingsChange:L}),"progress"===M&&(0,a.jsxs)("div",{children:[p&&(0,a.jsx)(q,{progress:p}),(0,a.jsx)(m,{onClick:()=>{confirm("Are you sure you want to clear all progress data? This cannot be undone.")&&(localStorage.removeItem(Y),N(J()))},variant:"outline",size:"sm",className:"w-full mt-3 bg-transparent text-xs",children:"Clear All Progress"})]}),"history"===M&&p&&(0,a.jsx)(en,{sessions:p.sessions.slice().reverse()})]})]})]})]}),(0,a.jsx)(eN,{open:A,onOpenChange:k,children:(0,a.jsxs)(ew,{className:"sm:max-w-md",children:[(0,a.jsxs)(eT,{children:[(0,a.jsx)(eS,{className:"flex items-center gap-2",children:"won"===u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(W.A,{className:"size-5 text-primary"}),"Checkout Complete!"]}):"Game Over"}),(0,a.jsx)(eA,{children:"won"===u?`You finished ${e} in ${o} darts!`:"You busted or failed to finish on a double."})]}),(0,a.jsx)(ez,{className:"gap-2 sm:gap-0",children:(0,a.jsx)(m,{onClick:U,className:"w-full sm:w-auto",children:"New Game"})})]})}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-2 sm:gap-3",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 flex flex-col gap-2",children:[(0,a.jsx)(y,{currentScore:t,startingScore:e,dartsThrown:o}),(0,a.jsx)(T,{darts:d,dartsThrown:o})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 flex flex-col gap-2",children:[(0,a.jsx)(b,{onSelectTarget:e=>{let s;if("playing"!==u)return;s="T"===e.zone?$.triple:"D"===e.zone?$.double:$.single;let t=function(e,s,t){if("D"===e.zone&&e.value===s||"BULL"===e.zone&&e.value===s)return{aimed:e,hit:e,score:e.value,wasAccurate:!0};let a=t?t/100:.65,r=Math.random();if(r<a)return{aimed:e,hit:e,score:e.value,wasAccurate:!0};if(r<a+.2){if("BULL"===e.zone||"OUTER_BULL"===e.zone)if("BULL"===e.zone)return{aimed:e,hit:{zone:"OUTER_BULL",number:25,label:"25",value:25},score:25,wasAccurate:!1};else{let s=Math.floor(20*Math.random())+1;return{aimed:e,hit:{zone:"S",number:s,label:`S${s}`,value:s},score:s,wasAccurate:!1}}let s=j(e.number),t=s[Math.floor(Math.random()*s.length)],a={zone:e.zone,number:t,label:`${e.zone}${t}`,value:"T"===e.zone?3*t:"D"===e.zone?2*t:t};return{aimed:e,hit:a,score:a.value,wasAccurate:!1}}if(r<a+.2+.1){if("BULL"===e.zone||"OUTER_BULL"===e.zone){let s=Math.floor(20*Math.random())+1;return{aimed:e,hit:{zone:"S",number:s,label:`S${s}`,value:s},score:s,wasAccurate:!1}}if("T"===e.zone){let s=Math.random(),t=j(e.number);if(s<.5){let s={zone:"S",number:e.number,label:`S${e.number}`,value:e.number};return{aimed:e,hit:s,score:s.value,wasAccurate:!1}}if(s<.8){let s=t[Math.floor(Math.random()*t.length)],a={zone:"S",number:s,label:`S${s}`,value:s};return{aimed:e,hit:a,score:a.value,wasAccurate:!1}}{let s=t[Math.floor(Math.random()*t.length)],a={zone:"T",number:s,label:`T${s}`,value:3*s};return{aimed:e,hit:a,score:a.value,wasAccurate:!1}}}let s=["S","T","D"].filter(s=>s!==e.zone),t=s[Math.floor(Math.random()*s.length)],a={zone:t,number:e.number,label:`${t}${e.number}`,value:"T"===t?3*e.number:"D"===t?2*e.number:e.number};return{aimed:e,hit:a,score:a.value,wasAccurate:!1}}if("T"!==e.zone)return{aimed:e,hit:{zone:"S",number:0,label:"Miss",value:0},score:0,wasAccurate:!1};let l=Math.random(),i=j(e.number);if(l<.5){let s={zone:"S",number:e.number,label:`S${e.number}`,value:e.number};return{aimed:e,hit:s,score:s.value,wasAccurate:!1}}if(l<.8){let s=i[Math.floor(Math.random()*i.length)],t={zone:"S",number:s,label:`S${s}`,value:s};return{aimed:e,hit:t,score:t.value,wasAccurate:!1}}{let s=i[Math.floor(Math.random()*i.length)],t={zone:"T",number:s,label:`T${s}`,value:3*s};return{aimed:e,hit:t,score:t.value,wasAccurate:!1}}}(e,i,s),a=i-t.score,r=F(i).some(s=>s.some(s=>s.label===e.label));_(e=>({accurateHits:t.wasAccurate?e.accurateHits+1:e.accurateHits,totalDarts:e.totalDarts+1,optimalDecisions:r?e.optimalDecisions+1:e.optimalDecisions,totalDecisions:e.totalDecisions+1})),n(a);let d=o+1;if(a<0||1===a){h("bust"),x(e=>[...e,t]),c(d),g(s=>[...s,e]),l(a),R(d,!1),k(!0);return}if(0===a&&"D"===t.hit.zone){h("won"),x(e=>[...e,t]),c(d),g(s=>[...s,e]),l(0),R(d,!0),k(!0);return}if(0===a&&"D"!==t.hit.zone){h("bust"),x(e=>[...e,t]),c(d),g(s=>[...s,e]),l(a),R(d,!1),k(!0);return}d%3==0&&l(a),x(e=>[...e,t]),c(d),g(s=>[...s,e])},disabled:"playing"!==u,size:$.dartboardSize}),(0,a.jsx)(eL,{type:"single",collapsible:!0,className:"w-full",children:(0,a.jsxs)(eM,{value:"details",className:"border rounded-lg px-3",children:[(0,a.jsx)(eB,{className:"text-xs py-2 hover:no-underline",children:"View Details & History"}),(0,a.jsxs)(eC,{className:"space-y-2 pb-2",children:[(0,a.jsx)(S,{dartHistory:d.map(e=>({aimed:e.aimed.label,hit:e.hit.label,score:e.score,wasAccurate:e.wasAccurate}))}),"playing"===u&&(0,a.jsx)(O,{currentScore:t,dartsRemaining:G,lastThrow:d.length>0?d[d.length-1]:void 0,userRoute:f}),(0,a.jsx)(H,{accuracy:V,optimalDecisions:C.optimalDecisions,totalDecisions:C.totalDecisions,averageDartsToFinish:I})]})]})})]})]})})]})})}}},e=>{e.O(0,[267,441,794,358],()=>e(e.s=162)),_N_E=e.O()}]);